import { Pool, neonConfig } from '@neondatabase/serverless';
import { drizzle } from 'drizzle-orm/neon-serverless';
import { products } from './shared/schema.ts';
import { eq, like } from 'drizzle-orm';
import ws from 'ws';

// –ù–∞—Å—Ç—Ä–æ–π–∫–∞ WebSocket –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Neon
neonConfig.webSocketConstructor = ws;

// –î–∞–Ω–Ω—ã–µ –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ü–µ–Ω –∏–∑ –ø—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞
const priceUpdates = [
  {
    name: "–ë–∞—Å—Å–µ–π–Ω –ì–∏–≥–∞–±–∞—Å—Å 7 —Ö 3.5 —Ö 1.5 –º, –º–æ—Ä–æ–∑–æ—É—Å—Ç–æ–π—á–∏–≤—ã–π –≤–∫–∞–ø—ã–≤–∞–µ–º—ã–π (—Å–∫–∏–º–º–µ—Ä+—Ñ–æ—Ä—Å—É–Ω–∫–∞) –∞—Ä—Ç. –¢–ú607 - –ø–ª–∞—Ç–∏–Ω–∞",
    originalPrice: 165000,
    price: 143625
  },
  {
    name: "–ë–∞—Å—Å–µ–π–Ω –õ–∞–≥—É–Ω–∞ 5 —Ö 1.25 –º (–ø–æ–ª–Ω–∞—è –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏—è) –∞—Ä—Ç. 50012 - –ø–ª–∞—Ç–∏–Ω–∞",
    originalPrice: 90000,
    price: 76875
  },
  {
    name: "–ë–∞—Å—Å–µ–π–Ω –ì–∏–≥–∞–±–∞—Å—Å 3 —Ö 2 —Ö 1.5 –º, –º–æ—Ä–æ–∑–æ—É—Å—Ç–æ–π—á–∏–≤—ã–π –≤–∫–∞–ø—ã–≤–∞–µ–º—ã–π (—Å–∫–∏–º–º–µ—Ä+—Ñ–æ—Ä—Å—É–Ω–∫–∞) –∞—Ä—Ç. –¢–ú868 - –ø–ª–∞—Ç–∏–Ω–∞",
    originalPrice: 71250,
    price: 60375
  },
  {
    name: "–ë–∞—Å—Å–µ–π–Ω –ì–∏–≥–∞–±–∞—Å—Å 4 —Ö 2 —Ö 1.5 –º, –º–æ—Ä–æ–∑–æ—É—Å—Ç–æ–π—á–∏–≤—ã–π –≤–∫–∞–ø—ã–≤–∞–µ–º—ã–π (—Å–∫–∏–º–º–µ—Ä+—Ñ–æ—Ä—Å—É–Ω–∫–∞) –∞—Ä—Ç. –¢–ú869 - –ø–ª–∞—Ç–∏–Ω–∞",
    originalPrice: 82500,
    price: 73875
  },
  {
    name: "–ë–∞—Å—Å–µ–π–Ω –ì–∏–≥–∞–±–∞—Å—Å 4 —Ö 3 —Ö 1.5 –º, –º–æ—Ä–æ–∑–æ—É—Å—Ç–æ–π—á–∏–≤—ã–π –≤–∫–∞–ø—ã–≤–∞–µ–º—ã–π (—Å–∫–∏–º–º–µ—Ä+—Ñ–æ—Ä—Å—É–Ω–∫–∞) –∞—Ä—Ç. –¢–ú870 - –ø–ª–∞—Ç–∏–Ω–∞",
    originalPrice: 97500,
    price: 83250
  },
  {
    name: "–ë–∞—Å—Å–µ–π–Ω –ì–∏–≥–∞–±–∞—Å—Å 5 —Ö 2 —Ö 1.5 –º, –º–æ—Ä–æ–∑–æ—É—Å—Ç–æ–π—á–∏–≤—ã–π –≤–∫–∞–ø—ã–≤–∞–µ–º—ã–π (—Å–∫–∏–º–º–µ—Ä+—Ñ–æ—Ä—Å—É–Ω–∫–∞) –∞—Ä—Ç. –¢–ú871 - –ø–ª–∞—Ç–∏–Ω–∞",
    originalPrice: 101250,
    price: 90000
  },
  {
    name: "–ë–∞—Å—Å–µ–π–Ω –ì–∏–≥–∞–±–∞—Å—Å 5 —Ö 3 —Ö 1.5 –º, –º–æ—Ä–æ–∑–æ—É—Å—Ç–æ–π—á–∏–≤—ã–π –≤–∫–∞–ø—ã–≤–∞–µ–º—ã–π (—Å–∫–∏–º–º–µ—Ä+—Ñ–æ—Ä—Å—É–Ω–∫–∞) –∞—Ä—Ç. –¢–ú605 - –ø–ª–∞—Ç–∏–Ω–∞",
    originalPrice: 120000,
    price: 108375
  },
  {
    name: "–ë–∞—Å—Å–µ–π–Ω –ì–∏–≥–∞–±–∞—Å—Å 6 —Ö 3 —Ö 1.5 –º, –º–æ—Ä–æ–∑–æ—É—Å—Ç–æ–π—á–∏–≤—ã–π –≤–∫–∞–ø—ã–≤–∞–µ–º—ã–π (—Å–∫–∏–º–º–µ—Ä+—Ñ–æ—Ä—Å—É–Ω–∫–∞) –∞—Ä—Ç. –¢–ú606 - –ø–ª–∞—Ç–∏–Ω–∞",
    originalPrice: 135000,
    price: 120750
  },
  {
    name: "–ë–∞—Å—Å–µ–π–Ω –ì–∏–≥–∞–±–∞—Å—Å 8 —Ö 3 —Ö 1.5 –º, –º–æ—Ä–æ–∑–æ—É—Å—Ç–æ–π—á–∏–≤—ã–π –≤–∫–∞–ø—ã–≤–∞–µ–º—ã–π (—Å–∫–∏–º–º–µ—Ä+—Ñ–æ—Ä—Å—É–Ω–∫–∞) –∞—Ä—Ç. –¢–ú876 - –ø–ª–∞—Ç–∏–Ω–∞",
    originalPrice: 172500,
    price: 150000
  },
  {
    name: "–ë–∞—Å—Å–µ–π–Ω –õ–∞–≥—É–Ω–∞ 3 —Ö 2 —Ö 1.25 –º, –º–æ—Ä–æ–∑–æ—É—Å—Ç–æ–π—á–∏–≤—ã–π (—Å–∫–∏–º–º–µ—Ä+—Ñ–æ—Ä—Å—É–Ω–∫–∞) –∞—Ä—Ç. 30020001",
    originalPrice: 48750,
    price: 39000
  },
  {
    name: "–ë–∞—Å—Å–µ–π–Ω –õ–∞–≥—É–Ω–∞ 4 —Ö 2 —Ö 1.25 –º, –º–æ—Ä–æ–∑–æ—É—Å—Ç–æ–π—á–∏–≤—ã–π (—Å–∫–∏–º–º–µ—Ä+—Ñ–æ—Ä—Å—É–Ω–∫–∞) –∞—Ä—Ç. 40020001",
    originalPrice: 56250,
    price: 47250
  },
  {
    name: "–ë–∞—Å—Å–µ–π–Ω –õ–∞–≥—É–Ω–∞ 4 —Ö 3 —Ö 1.25 –º, –º–æ—Ä–æ–∑–æ—É—Å—Ç–æ–π—á–∏–≤—ã–π (—Å–∫–∏–º–º–µ—Ä+—Ñ–æ—Ä—Å—É–Ω–∫–∞) –∞—Ä—Ç. 40030001",
    originalPrice: 63750,
    price: 52500
  },
  {
    name: "–ë–∞—Å—Å–µ–π–Ω –õ–∞–≥—É–Ω–∞ 5 —Ö 2.5 —Ö 1.25 –º, –º–æ—Ä–æ–∑–æ—É—Å—Ç–æ–π—á–∏–≤—ã–π (—Å–∫–∏–º–º–µ—Ä+—Ñ–æ—Ä—Å—É–Ω–∫–∞) –∞—Ä—Ç. 50025001",
    originalPrice: 67500,
    price: 57375
  },
  {
    name: "–ë–∞—Å—Å–µ–π–Ω –õ–∞–≥—É–Ω–∞ 5 —Ö 3 —Ö 1.25 –º, –º–æ—Ä–æ–∑–æ—É—Å—Ç–æ–π—á–∏–≤—ã–π (—Å–∫–∏–º–º–µ—Ä+—Ñ–æ—Ä—Å—É–Ω–∫–∞) –∞—Ä—Ç. 50030001",
    originalPrice: 71250,
    price: 59625
  },
  {
    name: "–ë–∞—Å—Å–µ–π–Ω –õ–∞–≥—É–Ω–∞ 6 —Ö 3 —Ö 1.25 –º, –º–æ—Ä–æ–∑–æ—É—Å—Ç–æ–π—á–∏–≤—ã–π (—Å–∫–∏–º–º–µ—Ä+—Ñ–æ—Ä—Å—É–Ω–∫–∞) –∞—Ä—Ç. 60030001",
    originalPrice: 78750,
    price: 70125
  },
  {
    name: "–ë–∞—Å—Å–µ–π–Ω –õ–∞–≥—É–Ω–∞ 6 —Ö 3.5 —Ö 1.25 –º, –º–æ—Ä–æ–∑–æ—É—Å—Ç–æ–π—á–∏–≤—ã–π (—Å–∫–∏–º–º–µ—Ä+—Ñ–æ—Ä—Å—É–Ω–∫–∞) –∞—Ä—Ç. 60035001",
    originalPrice: 82500,
    price: 72750
  },
  {
    name: "–ë–∞—Å—Å–µ–π–Ω –õ–∞–≥—É–Ω–∞ 6 —Ö 4 —Ö 1.25 –º, –º–æ—Ä–æ–∑–æ—É—Å—Ç–æ–π—á–∏–≤—ã–π (—Å–∫–∏–º–º–µ—Ä+—Ñ–æ—Ä—Å—É–Ω–∫–∞) –∞—Ä—Ç. 60040001",
    originalPrice: 86250,
    price: 74625
  },
  {
    name: "–ë–∞—Å—Å–µ–π–Ω –õ–∞–≥—É–Ω–∞ 5 —Ö 1.25 –º (–ø–æ–ª–Ω–∞—è –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏—è) –∞—Ä—Ç. 50040 / 3 - –¥–µ—Ä–µ–≤–æ",
    originalPrice: 99000,
    price: 91875
  },
  {
    name: "–ë–∞—Å—Å–µ–π–Ω –õ–∞–≥—É–Ω–∞ 4 —Ö 1.25 –º (–ø–æ–ª–Ω–∞—è –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏—è) –∞—Ä—Ç. 40040 / 3 - –¥–µ—Ä–µ–≤–æ",
    originalPrice: 75000,
    price: 73125
  },
  {
    name: "–ë–∞—Å—Å–µ–π–Ω –õ–∞–≥—É–Ω–∞ 3.5 —Ö 1.25 –º (–ø–æ–ª–Ω–∞—è –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏—è) –∞—Ä—Ç. 35040 / 3 - –¥–µ—Ä–µ–≤–æ",
    originalPrice: 77250,
    price: 67500
  },
  {
    name: "–ë–∞—Å—Å–µ–π–Ω –õ–∞–≥—É–Ω–∞ 3 —Ö 1.25 –º (–ø–æ–ª–Ω–∞—è –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏—è) –∞—Ä—Ç. 30040 / 3 - –¥–µ—Ä–µ–≤–æ",
    originalPrice: 69000,
    price: 59625
  },
  {
    name: "–ë–∞—Å—Å–µ–π–Ω –õ–∞–≥—É–Ω–∞ 5.5 —Ö 1.25 –º (–ø–æ–ª–Ω–∞—è –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏—è) –∞—Ä—Ç. 55012 / 3 - –ø–ª–∞—Ç–∏–Ω–∞",
    originalPrice: 103500,
    price: 95250
  },
  {
    name: "–ë–∞—Å—Å–µ–π–Ω –õ–∞–≥—É–Ω–∞ 4.5 —Ö 1.25 –º (–ø–æ–ª–Ω–∞—è –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏—è) –∞—Ä—Ç. 45012 / 3 - –ø–ª–∞—Ç–∏–Ω–∞",
    originalPrice: 84000,
    price: 78000
  },
  {
    name: "–ë–∞—Å—Å–µ–π–Ω –õ–∞–≥—É–Ω–∞ 4 —Ö 1.25 –º (–ø–æ–ª–Ω–∞—è –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏—è) –∞—Ä—Ç. 40012 / 3 - –ø–ª–∞—Ç–∏–Ω–∞",
    originalPrice: 78750,
    price: 68625
  },
  {
    name: "–ë–∞—Å—Å–µ–π–Ω –õ–∞–≥—É–Ω–∞ 3.5 —Ö 1.25 –º (–ø–æ–ª–Ω–∞—è –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏—è) –∞—Ä—Ç. 35012 / 3 - –ø–ª–∞—Ç–∏–Ω–∞",
    originalPrice: 73500,
    price: 63375
  },
  {
    name: "–ë–∞—Å—Å–µ–π–Ω –õ–∞–≥—É–Ω–∞ 3 —Ö 1.25 –º (–ø–æ–ª–Ω–∞—è –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏—è) –∞—Ä—Ç. 30012 / 3 - –ø–ª–∞—Ç–∏–Ω–∞",
    originalPrice: 63750,
    price: 55875
  },
  {
    name: "–ë–∞—Å—Å–µ–π–Ω –õ–∞–≥—É–Ω–∞ 5.5 —Ö 1.25 –º (–ø–æ–ª–Ω–∞—è –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏—è) –∞—Ä—Ç. 55014 / 3 - –∫–æ—Ä–∏—á–Ω–µ–≤—ã–π",
    originalPrice: 108750,
    price: 95250
  },
  {
    name: "–ë–∞—Å—Å–µ–π–Ω –õ–∞–≥—É–Ω–∞ 5 —Ö 1.25 –º (–ø–æ–ª–Ω–∞—è –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏—è) –∞—Ä—Ç. 50014 / 3 - –∫–æ—Ä–∏—á–Ω–µ–≤—ã–π",
    originalPrice: 97500,
    price: 86625
  },
  {
    name: "–ë–∞—Å—Å–µ–π–Ω –õ–∞–≥—É–Ω–∞ 4.5 —Ö 1.25 –º (–ø–æ–ª–Ω–∞—è –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏—è) –∞—Ä—Ç. 45014 / 3 - –∫–æ—Ä–∏—á–Ω–µ–≤—ã–π",
    originalPrice: 90000,
    price: 78000
  },
  {
    name: "–ë–∞—Å—Å–µ–π–Ω –õ–∞–≥—É–Ω–∞ 4 —Ö 1.25 –º (–ø–æ–ª–Ω–∞—è –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏—è) –∞—Ä—Ç. 40014 / 3 - –∫–æ—Ä–∏—á–Ω–µ–≤—ã–π",
    originalPrice: 78750,
    price: 68625
  },
  {
    name: "–ë–∞—Å—Å–µ–π–Ω –õ–∞–≥—É–Ω–∞ 3.5 —Ö 1.25 –º (–ø–æ–ª–Ω–∞—è –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏—è) –∞—Ä—Ç. 35014 / 3 - –∫–æ—Ä–∏—á–Ω–µ–≤—ã–π",
    originalPrice: 73500,
    price: 63375
  },
  {
    name: "–ë–∞—Å—Å–µ–π–Ω –õ–∞–≥—É–Ω–∞ 3 —Ö 1.25 –º (–ø–æ–ª–Ω–∞—è –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏—è) –∞—Ä—Ç. 30014 / 3 - –∫–æ—Ä–∏—á–Ω–µ–≤—ã–π",
    originalPrice: 63750,
    price: 55875
  },
  {
    name: "–ë–∞—Å—Å–µ–π–Ω –õ–∞–≥—É–Ω–∞ 4 —Ö 1.25 –º (–ø–æ–ª–Ω–∞—è –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏—è) –∞—Ä—Ç. 40040 / 2 - –¥–µ—Ä–µ–≤–æ",
    originalPrice: 82500,
    price: 73125
  },
  {
    name: "–ë–∞—Å—Å–µ–π–Ω –õ–∞–≥—É–Ω–∞ 3.5 —Ö 1.25 –º (–ø–æ–ª–Ω–∞—è –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏—è) –∞—Ä—Ç. 35040 / 2 - –¥–µ—Ä–µ–≤–æ",
    originalPrice: 77250,
    price: 67500
  },
  {
    name: "–ë–∞—Å—Å–µ–π–Ω –õ–∞–≥—É–Ω–∞ 5.5 —Ö 1.25 –º (–ø–æ–ª–Ω–∞—è –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏—è) –∞—Ä—Ç. 55012 / 2 - –ø–ª–∞—Ç–∏–Ω–∞",
    originalPrice: 103500,
    price: 95250
  },
  {
    name: "–ë–∞—Å—Å–µ–π–Ω –õ–∞–≥—É–Ω–∞ 4.5 —Ö 1.25 –º (–ø–æ–ª–Ω–∞—è –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏—è) –∞—Ä—Ç. 45012 / 2 - –ø–ª–∞—Ç–∏–Ω–∞",
    originalPrice: 84000,
    price: 78000
  },
  {
    name: "–ë–∞—Å—Å–µ–π–Ω –õ–∞–≥—É–Ω–∞ 4 —Ö 1.25 –º (–ø–æ–ª–Ω–∞—è –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏—è) –∞—Ä—Ç. 40012 / 2 - –ø–ª–∞—Ç–∏–Ω–∞",
    originalPrice: 78750,
    price: 68625
  },
  {
    name: "–ë–∞—Å—Å–µ–π–Ω –õ–∞–≥—É–Ω–∞ 3.5 —Ö 1.25 –º (–ø–æ–ª–Ω–∞—è –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏—è) –∞—Ä—Ç. 35012 / 2 - –ø–ª–∞—Ç–∏–Ω–∞",
    originalPrice: 73500,
    price: 63375
  },
  {
    name: "–ë–∞—Å—Å–µ–π–Ω –ì–∏–≥–∞–±–∞—Å—Å 3 —Ö 1.5 –º, –º–æ—Ä–æ–∑–æ—É—Å—Ç–æ–π—á–∏–≤—ã–π –≤–∫–∞–ø—ã–≤–∞–µ–º—ã–π (–ø–æ–ª–Ω—ã–π –∫–æ–º–ø–ª–µ–∫—Ç) –∞—Ä—Ç. –¢–ú595-01 - –ø–ª–∞—Ç–∏–Ω–∞",
    originalPrice: 97500,
    price: 80625
  },
  {
    name: "–ë–∞—Å—Å–µ–π–Ω –ì–∏–≥–∞–±–∞—Å—Å 3.5 —Ö 1.5 –º, –º–æ—Ä–æ–∑–æ—É—Å—Ç–æ–π—á–∏–≤—ã–π –≤–∫–∞–ø—ã–≤–∞–µ–º—ã–π (–ø–æ–ª–Ω—ã–π –∫–æ–º–ø–ª–µ–∫—Ç) –∞—Ä—Ç. –¢–ú596-01 - –ø–ª–∞—Ç–∏–Ω–∞",
    originalPrice: 112500,
    price: 93000
  },
  {
    name: "–ë–∞—Å—Å–µ–π–Ω –ì–∏–≥–∞–±–∞—Å—Å 4 —Ö 1.5 –º, –º–æ—Ä–æ–∑–æ—É—Å—Ç–æ–π—á–∏–≤—ã–π –≤–∫–∞–ø—ã–≤–∞–µ–º—ã–π (–ø–æ–ª–Ω—ã–π –∫–æ–º–ø–ª–µ–∫—Ç) –∞—Ä—Ç. –¢–ú597-01 - –ø–ª–∞—Ç–∏–Ω–∞",
    originalPrice: 120000,
    price: 103500
  },
  {
    name: "–ë–∞—Å—Å–µ–π–Ω –ì–∏–≥–∞–±–∞—Å—Å 4.5 —Ö 1.5 –º, –º–æ—Ä–æ–∑–æ—É—Å—Ç–æ–π—á–∏–≤—ã–π –≤–∫–∞–ø—ã–≤–∞–µ–º—ã–π (–ø–æ–ª–Ω—ã–π –∫–æ–º–ø–ª–µ–∫—Ç) –∞—Ä—Ç. –¢–ú598-01 - –ø–ª–∞—Ç–∏–Ω–∞",
    originalPrice: 135000,
    price: 115500
  },
  {
    name: "–ë–∞—Å—Å–µ–π–Ω –ì–∏–≥–∞–±–∞—Å—Å 5 —Ö 1.5 –º, –º–æ—Ä–æ–∑–æ—É—Å—Ç–æ–π—á–∏–≤—ã–π –≤–∫–∞–ø—ã–≤–∞–µ–º—ã–π (–ø–æ–ª–Ω—ã–π –∫–æ–º–ø–ª–µ–∫—Ç) –∞—Ä—Ç. –¢–ú599-01 - –ø–ª–∞—Ç–∏–Ω–∞",
    originalPrice: 150000,
    price: 129375
  },
  {
    name: "–ë–∞—Å—Å–µ–π–Ω –ì–∏–≥–∞–±–∞—Å—Å 6 —Ö 1.5 –º, –º–æ—Ä–æ–∑–æ—É—Å—Ç–æ–π—á–∏–≤—ã–π –≤–∫–∞–ø—ã–≤–∞–µ–º—ã–π (–ø–æ–ª–Ω—ã–π –∫–æ–º–ø–ª–µ–∫—Ç) –∞—Ä—Ç. –¢–ú600-01 - –ø–ª–∞—Ç–∏–Ω–∞",
    originalPrice: 180000,
    price: 153750
  },
  {
    name: "–ë–∞—Å—Å–µ–π–Ω –õ–∞–≥—É–Ω–∞ 5.5 —Ö 1.25 –º (–ø–æ–ª–Ω–∞—è –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏—è) –∞—Ä—Ç. 55014 / 2 - –∫–æ—Ä–∏—á–Ω–µ–≤—ã–π",
    originalPrice: 108750,
    price: 95250
  },
  {
    name: "–ë–∞—Å—Å–µ–π–Ω –õ–∞–≥—É–Ω–∞ 4.5 —Ö 1.25 –º (–ø–æ–ª–Ω–∞—è –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏—è) –∞—Ä—Ç. 45014 / 2 - –∫–æ—Ä–∏—á–Ω–µ–≤—ã–π",
    originalPrice: 90000,
    price: 78000
  },
  {
    name: "–ë–∞—Å—Å–µ–π–Ω –õ–∞–≥—É–Ω–∞ 5.5 —Ö 1.25 –º (–ø–æ–ª–Ω–∞—è –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏—è) –∞—Ä—Ç. 55040 / 1 - –¥–µ—Ä–µ–≤–æ",
    originalPrice: 105000,
    price: 89625
  },
  {
    name: "–ë–∞—Å—Å–µ–π–Ω –õ–∞–≥—É–Ω–∞ 5 —Ö 1.25 –º (–ø–æ–ª–Ω–∞—è –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏—è) –∞—Ä—Ç. 50040 / 1 - –¥–µ—Ä–µ–≤–æ",
    originalPrice: 93750,
    price: 82125
  },
  {
    name: "–ë–∞—Å—Å–µ–π–Ω –õ–∞–≥—É–Ω–∞ 4.5 —Ö 1.25 –º (–ø–æ–ª–Ω–∞—è –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏—è) –∞—Ä—Ç. 45040 / 1 - –¥–µ—Ä–µ–≤–æ",
    originalPrice: 86250,
    price: 74250
  },
  {
    name: "–ë–∞—Å—Å–µ–π–Ω –õ–∞–≥—É–Ω–∞ 4 —Ö 1.25 –º (–ø–æ–ª–Ω–∞—è –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏—è) –∞—Ä—Ç. 40040 / 1 - –¥–µ—Ä–µ–≤–æ",
    originalPrice: 78750,
    price: 66375
  },
  {
    name: "–ë–∞—Å—Å–µ–π–Ω –õ–∞–≥—É–Ω–∞ 3.5 —Ö 1.25 –º (–ø–æ–ª–Ω–∞—è –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏—è) –∞—Ä—Ç. 35040 / 1 - –¥–µ—Ä–µ–≤–æ",
    originalPrice: 75000,
    price: 61875
  },
  {
    name: "–ë–∞—Å—Å–µ–π–Ω –õ–∞–≥—É–Ω–∞ 3 —Ö 1.25 –º (–ø–æ–ª–Ω–∞—è –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏—è) –∞—Ä—Ç. 30040 / 1 - –¥–µ—Ä–µ–≤–æ",
    originalPrice: 67500,
    price: 55500
  },
  {
    name: "–ë–∞—Å—Å–µ–π–Ω –õ–∞–≥—É–Ω–∞ 5.5 —Ö 1.25 –º (–ø–æ–ª–Ω–∞—è –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏—è) –∞—Ä—Ç. 55012 / 1 - –ø–ª–∞—Ç–∏–Ω–∞",
    originalPrice: 97500,
    price: 83250
  },
  {
    name: "–ë–∞—Å—Å–µ–π–Ω –õ–∞–≥—É–Ω–∞ 5 —Ö 1.25 –º (–ø–æ–ª–Ω–∞—è –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏—è) –∞—Ä—Ç. 50012 / 1 - –ø–ª–∞—Ç–∏–Ω–∞",
    originalPrice: 90000,
    price: 76875
  },
  {
    name: "–ë–∞—Å—Å–µ–π–Ω –õ–∞–≥—É–Ω–∞ 4.5 —Ö 1.25 –º (–ø–æ–ª–Ω–∞—è –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏—è) –∞—Ä—Ç. 45012 / 1 - –ø–ª–∞—Ç–∏–Ω–∞",
    originalPrice: 78750,
    price: 69375
  },
  {
    name: "–ë–∞—Å—Å–µ–π–Ω –õ–∞–≥—É–Ω–∞ 4 —Ö 1.25 –º (–ø–æ–ª–Ω–∞—è –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏—è) –∞—Ä—Ç. 40012 / 1 - –ø–ª–∞—Ç–∏–Ω–∞",
    originalPrice: 75000,
    price: 61875
  },
  {
    name: "–ë–∞—Å—Å–µ–π–Ω –õ–∞–≥—É–Ω–∞ 3.5 —Ö 1.25 –º (–ø–æ–ª–Ω–∞—è –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏—è) –∞—Ä—Ç. 35012 / 1 - –ø–ª–∞—Ç–∏–Ω–∞",
    originalPrice: 67500,
    price: 57750
  },
  {
    name: "–ë–∞—Å—Å–µ–π–Ω –õ–∞–≥—É–Ω–∞ 3 —Ö 1.25 –º (–ø–æ–ª–Ω–∞—è –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏—è) –∞—Ä—Ç. 30012 / 1 - –ø–ª–∞—Ç–∏–Ω–∞",
    originalPrice: 60000,
    price: 51750
  },
  {
    name: "–ë–∞—Å—Å–µ–π–Ω –õ–∞–≥—É–Ω–∞ 5.5 —Ö 1.25 –º (–ø–æ–ª–Ω–∞—è –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏—è) –∞—Ä—Ç. 55014 / 1 - –∫–æ—Ä–∏—á–Ω–µ–≤—ã–π",
    originalPrice: 97500,
    price: 82500
  },
  {
    name: "–ë–∞—Å—Å–µ–π–Ω –õ–∞–≥—É–Ω–∞ 5 —Ö 1.25 –º (–ø–æ–ª–Ω–∞—è –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏—è) –∞—Ä—Ç. 50014 / 1 - –∫–æ—Ä–∏—á–Ω–µ–≤—ã–π",
    originalPrice: 90000,
    price: 76875
  }
];

async function newBatchPriceUpdate() {
  if (!process.env.DATABASE_URL) {
    throw new Error('DATABASE_URL environment variable is required');
  }

  const pool = new Pool({ connectionString: process.env.DATABASE_URL });
  const db = drizzle(pool);

  console.log('üöÄ –ù–∞—á–∏–Ω–∞–µ–º –º–∞—Å—Å–æ–≤–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ü–µ–Ω —Ç–æ–≤–∞—Ä–æ–≤...');
  
  let updatedCount = 0;
  let notFoundCount = 0;
  let errors = [];

  for (const update of priceUpdates) {
    try {
      // –ò—â–µ–º —Ç–æ–≤–∞—Ä –ø–æ —Ç–æ—á–Ω–æ–º—É –Ω–∞–∑–≤–∞–Ω–∏—é
      const existingProducts = await db
        .select()
        .from(products)
        .where(eq(products.name, update.name));
      
      if (existingProducts.length > 0) {
        const product = existingProducts[0];
        
        // –û–±–Ω–æ–≤–ª—è–µ–º —Ü–µ–Ω—ã
        await db
          .update(products)
          .set({
            price: update.price.toString(),
            originalPrice: update.originalPrice.toString()
          })
          .where(eq(products.id, product.id));
        
        console.log(`‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω —Ç–æ–≤–∞—Ä: ${product.name}`);
        console.log(`   –°—Ç–∞—Ä–∞—è —Ü–µ–Ω–∞: ${product.price} ‚Üí –ù–æ–≤–∞—è —Ü–µ–Ω–∞: ${update.price}`);
        console.log(`   –°—Ç–∞—Ä–∞—è —Ü–µ–Ω–∞ –¥–æ —Å–∫–∏–¥–∫–∏: ${product.originalPrice} ‚Üí –ù–æ–≤–∞—è —Ü–µ–Ω–∞ –¥–æ —Å–∫–∏–¥–∫–∏: ${update.originalPrice}`);
        updatedCount++;
      } else {
        console.log(`‚ùå –¢–æ–≤–∞—Ä –Ω–µ –Ω–∞–π–¥–µ–Ω: ${update.name}`);
        notFoundCount++;
      }
    } catch (error) {
      console.error(`‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Ç–æ–≤–∞—Ä–∞ "${update.name}":`, error.message);
      errors.push({ name: update.name, error: error.message });
    }
  }

  console.log('\nüìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –º–∞—Å—Å–æ–≤–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:');
  console.log(`‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–æ —Ç–æ–≤–∞—Ä–æ–≤: ${updatedCount}`);
  console.log(`‚ùå –¢–æ–≤–∞—Ä–æ–≤ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ: ${notFoundCount}`);
  console.log(`üìù –í—Å–µ–≥–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ: ${priceUpdates.length}`);
  
  if (errors.length > 0) {
    console.log(`‚ö†Ô∏è –û—à–∏–±–æ–∫: ${errors.length}`);
  }

  await pool.end();
}

// –ó–∞–ø—É—Å–∫–∞–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
newBatchPriceUpdate()
  .then(() => {
    console.log('üéâ –ú–∞—Å—Å–æ–≤–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ü–µ–Ω –∑–∞–≤–µ—Ä—à–µ–Ω–æ —É—Å–ø–µ—à–Ω–æ!');
    process.exit(0);
  })
  .catch((error) => {
    console.error('üí• –û—à–∏–±–∫–∞ –ø—Ä–∏ –º–∞—Å—Å–æ–≤–æ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Ü–µ–Ω:', error);
    process.exit(1);
  });